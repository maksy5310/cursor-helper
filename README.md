# CursoråŠ©æ‰‹æ’ä»¶

Cursor ä½¿ç”¨æ•°æ®é‡‡é›†æ’ä»¶ï¼Œç”¨äºè‡ªåŠ¨é‡‡é›† Cursor çš„ä½¿ç”¨æ•°æ®å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **è‡ªåŠ¨æ•°æ®é‡‡é›†**ï¼šå®æ—¶é‡‡é›† Tabé”®è‡ªåŠ¨è¡¥å…¨ã€cmd+K è¡Œå†…è‡ªåŠ¨è¡¥å…¨ã€Agent å¯¹è¯æ¨¡å¼çš„ä½¿ç”¨ç»Ÿè®¡
- ğŸ’¬ **å¯¹è¯è®°å½•**ï¼šè®°å½•æ‰€æœ‰ Cursor AI å¯¹è¯ï¼ˆåŒ…æ‹¬æ™®é€šèŠå¤©å’Œ Agent æ¨¡å¼ï¼‰
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**ï¼šè‡ªåŠ¨ä¿å­˜åˆ° `./cursor-helper/yyyy-mm-dd/` ç›®å½•ç»“æ„
- âš¡ **æ‰¹é‡å†™å…¥**ï¼šæ¯ 10 ç§’æˆ–ç´¯ç§¯ 100 æ¡è®°å½•è‡ªåŠ¨å†™å…¥ï¼Œä¼˜åŒ–æ€§èƒ½
- ğŸ”§ **é…ç½®ç®¡ç†**ï¼šæ”¯æŒå¯ç”¨/ç¦ç”¨æ•°æ®é‡‡é›†
- ğŸ“¤ **æ™ºèƒ½ä¸Šä¼ **ï¼šä¸Šä¼ è®°å½•åˆ°åˆ†äº«å¹³å°,æ”¯æŒè¡¨å•è‡ªåŠ¨å¡«å……
  - ğŸ“§ **é‚®ç®±è‡ªåŠ¨å¡«å……**ï¼šä»ç™»å½•è´¦å·è‡ªåŠ¨æå–é‚®ç®±,æ— éœ€æ‰‹åŠ¨è¾“å…¥
  - ğŸ“ **é¡¹ç›®åç§°è‡ªåŠ¨å¡«å……**ï¼šè‡ªåŠ¨ä½¿ç”¨å½“å‰å·¥ä½œåŒºåç§°,å‡å°‘é‡å¤æ“ä½œ
  - ğŸ”„ **è¡¨å•é‡ç½®åè‡ªåŠ¨å¡«å……**ï¼šé‡ç½®è¡¨å•åè‡ªåŠ¨é‡æ–°å¡«å……é‚®ç®±å’Œé¡¹ç›®åç§°

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. ç¼–è¯‘é¡¹ç›®

```bash
npm run compile
```

### 3. è¿è¡Œæ’ä»¶

#### æ–¹æ³•ä¸€ï¼šåœ¨ Cursor/VS Code ä¸­è°ƒè¯•è¿è¡Œï¼ˆæ¨èï¼‰

1. åœ¨ Cursor ä¸­æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ `F:\spec-kit\cursor-helper`
2. æŒ‰ `F5` æˆ–ç‚¹å‡»èœå• `Run > Start Debugging`
3. è¿™ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„ **Extension Development Host** çª—å£
4. åœ¨æ–°çª—å£ä¸­æ‰“å¼€ä»»æ„å·¥ä½œåŒºï¼Œæ’ä»¶ä¼šè‡ªåŠ¨æ¿€æ´»

#### æ–¹æ³•äºŒï¼šä½¿ç”¨å‘½ä»¤é¢æ¿

1. åœ¨ Cursor ä¸­æ‰“å¼€é¡¹ç›®
2. æŒ‰ `Ctrl+Shift+P` (Windows) æˆ– `Cmd+Shift+P` (Mac) æ‰“å¼€å‘½ä»¤é¢æ¿
3. è¾“å…¥ `Debug: Start Debugging` å¹¶é€‰æ‹©
4. é€‰æ‹© `Run Extension` é…ç½®

#### æ–¹æ³•ä¸‰ï¼šæ‰“åŒ…å®‰è£…

```bash
# å®‰è£… vsceï¼ˆVS Code Extension æ‰“åŒ…å·¥å…·ï¼‰
npm install -g @vscode/vsce

# æ‰“åŒ…æ’ä»¶
vsce package

# è¿™ä¼šç”Ÿæˆ cursor-assistant-0.0.1.vsix æ–‡ä»¶
# ç„¶ååœ¨ Cursor ä¸­ï¼š
# 1. æŒ‰ Ctrl+Shift+P æ‰“å¼€å‘½ä»¤é¢æ¿
# 2. è¾“å…¥ "Extensions: Install from VSIX..."
# 3. é€‰æ‹©ç”Ÿæˆçš„ .vsix æ–‡ä»¶
```

## éªŒè¯æ’ä»¶è¿è¡Œ

### 1. æŸ¥çœ‹è¾“å‡ºæ—¥å¿—

1. åœ¨ Extension Development Host çª—å£ä¸­ï¼ŒæŒ‰ `Ctrl+Shift+U` æ‰“å¼€è¾“å‡ºé¢æ¿
2. åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© `Cursor Assistant`
3. åº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„æ—¥å¿—ï¼š
   ```
   [timestamp] [INFO] Cursor Assistant extension is activating...
   [timestamp] [INFO] Data collection is enabled
   [timestamp] [INFO] Storage manager initialized successfully
   [timestamp] [INFO] Data collector started successfully
   ```

### 2. æ£€æŸ¥æ•°æ®æ–‡ä»¶

1. åœ¨ Extension Development Host çª—å£ä¸­æ‰“å¼€ä»»æ„å·¥ä½œåŒº
2. è¿›è¡Œä¸€äº›ç¼–è¾‘æ“ä½œï¼ˆè¾“å…¥ä»£ç ã€ä½¿ç”¨ Tab è¡¥å…¨ç­‰ï¼‰
3. ç­‰å¾… 10 ç§’æˆ–è¿›è¡Œ 100 æ¬¡æ“ä½œ
4. åœ¨å·¥ä½œåŒºæ ¹ç›®å½•ä¸‹åº”è¯¥èƒ½çœ‹åˆ° `cursor-helper` æ–‡ä»¶å¤¹ï¼š
   ```
   cursor-helper/
   â””â”€â”€ 2025-12-10/          # ä»Šå¤©çš„æ—¥æœŸ
       â”œâ”€â”€ stats-20251210-143022.json
       â””â”€â”€ agent-20251210-143022.json
   ```

### 3. æµ‹è¯•å‘½ä»¤

1. åœ¨ Extension Development Host çª—å£ä¸­ï¼ŒæŒ‰ `Ctrl+Shift+P` æ‰“å¼€å‘½ä»¤é¢æ¿
2. è¾“å…¥ `Toggle Data Collection` å¹¶æ‰§è¡Œ
3. åº”è¯¥èƒ½çœ‹åˆ°æç¤ºæ¶ˆæ¯ï¼š"Data collection enabled" æˆ– "Data collection disabled"

## ä½¿ç”¨æŒ‡å—

### ä¸Šä¼ è®°å½•åˆ°åˆ†äº«å¹³å°

1. **é…ç½®ç™»å½•ä¿¡æ¯**ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰ï¼š
   - æŒ‰ `Ctrl+Shift+P` æ‰“å¼€å‘½ä»¤é¢æ¿
   - è¾“å…¥ `Configure Upload Settings` å¹¶æ‰§è¡Œ
   - è¾“å…¥ JWT Token è¿›è¡Œèº«ä»½éªŒè¯
   
2. **ä¸Šä¼ ä¼šè¯è®°å½•**ï¼š
   - æŒ‰ `Ctrl+Shift+P` æ‰“å¼€å‘½ä»¤é¢æ¿
   - è¾“å…¥ `Upload Record` å¹¶æ‰§è¡Œ
   - åœ¨å¼¹å‡ºçš„è¡¨å•ä¸­ï¼š
     - **é‚®ç®±**ï¼šè‡ªåŠ¨å¡«å……å½“å‰ç™»å½•è´¦å·çš„é‚®ç®±ï¼ˆå¯ç¼–è¾‘ï¼‰
     - **é¡¹ç›®åç§°**ï¼šè‡ªåŠ¨å¡«å……å½“å‰å·¥ä½œåŒºåç§°ï¼ˆå¯ç¼–è¾‘ï¼‰
     - **ä¸Šä¼ æ—¶é—´**ï¼šé»˜è®¤ä¸ºå½“å‰æ—¶é—´
     - **å†…å®¹æ ¼å¼**ï¼šé€‰æ‹© Markdownã€Textã€JSON æˆ– HTML
     - **å†…å®¹**ï¼šä»æ•°æ®åº“è‡ªåŠ¨åŠ è½½çš„ä¼šè¯å†…å®¹ï¼ˆå¯ç¼–è¾‘ï¼‰
   - ç‚¹å‡» **æäº¤** ä¸Šä¼ è®°å½•

3. **æŸ¥çœ‹ä¸Šä¼ å†å²**ï¼š
   - æŒ‰ `Ctrl+Shift+P` æ‰“å¼€å‘½ä»¤é¢æ¿
   - è¾“å…¥ `View Upload History` å¹¶æ‰§è¡Œ
   - æŸ¥çœ‹æ‰€æœ‰å·²ä¸Šä¼ çš„è®°å½•

### è‡ªåŠ¨å¡«å……åŠŸèƒ½è¯´æ˜

- **é‚®ç®±è‡ªåŠ¨å¡«å……**ï¼š
  - ä» JWT Token ä¸­è‡ªåŠ¨æå–ç”¨æˆ·é‚®ç®±
  - å¦‚æœæœªç™»å½•æˆ– Token æ— æ•ˆ,å­—æ®µä¿æŒä¸ºç©º
  - å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹è‡ªåŠ¨å¡«å……çš„é‚®ç®±

- **é¡¹ç›®åç§°è‡ªåŠ¨å¡«å……**ï¼š
  - ä½¿ç”¨å½“å‰å·¥ä½œåŒºï¼ˆworkspaceï¼‰çš„åç§°
  - å¦‚æœæ²¡æœ‰æ‰“å¼€å·¥ä½œåŒº,å­—æ®µä¿æŒä¸ºç©º
  - å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹è‡ªåŠ¨å¡«å……çš„é¡¹ç›®åç§°

- **è¡¨å•é‡ç½®**ï¼š
  - ç‚¹å‡»è¡¨å•çš„"é‡ç½®"æŒ‰é’®å
  - é‚®ç®±å’Œé¡¹ç›®åç§°ä¼šè‡ªåŠ¨é‡æ–°å¡«å……
  - å†…å®¹å­—æ®µä¼šè¢«æ¸…ç©º

## é…ç½®é€‰é¡¹

åœ¨ Cursor è®¾ç½®ä¸­å¯ä»¥é…ç½®ï¼š

- `cursor-assistant.enabled`: å¯ç”¨/ç¦ç”¨æ•°æ®é‡‡é›†ï¼ˆé»˜è®¤ï¼štrueï¼‰
- `cursor-assistant.batchWriteInterval`: æ‰¹é‡å†™å…¥é—´éš”ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤ï¼š10000ï¼‰
- `cursor-assistant.batchWriteThreshold`: æ‰¹é‡å†™å…¥é˜ˆå€¼ï¼ˆè®°å½•æ•°ï¼Œé»˜è®¤ï¼š100ï¼‰

### ç¯å¢ƒé…ç½®

é¡¹ç›®ä½¿ç”¨å¤–éƒ¨ JSON é…ç½®æ–‡ä»¶æ–¹æ¡ˆï¼š

- **å¼€å‘ç¯å¢ƒ** (`src/config.json`): é»˜è®¤ä½¿ç”¨ `https://spec.pixvert.app`
- **ç”Ÿäº§ç¯å¢ƒ** (`src/config.prod.json`): è‡ªåŠ¨å‘å¸ƒæ—¶ä½¿ç”¨ `https://spec.ak01.cn`
- **é…ç½®ç±»** (`src/utils/config.ts`): è‡ªåŠ¨è¯»å–é…ç½®æ–‡ä»¶

```json
// src/config.json
{
  "env": "development",
  "baseUrl": "https://spec.pixvert.app"
}
```

è¯¦è§ï¼š[é…ç½®ç®¡ç†è¯´æ˜](./docs/CONFIG_MANAGEMENT.md)

## é¡¹ç›®ç»“æ„

```
cursor-helper/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extension.ts          # æ‰©å±•å…¥å£ç‚¹
â”‚   â”œâ”€â”€ dataCollector.ts      # æ•°æ®é‡‡é›†å™¨
â”‚   â”œâ”€â”€ storageManager.ts    # å­˜å‚¨ç®¡ç†å™¨
â”‚   â”œâ”€â”€ eventListeners.ts    # äº‹ä»¶ç›‘å¬å™¨
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ usageStats.ts
â”‚   â”‚   â””â”€â”€ agentRecord.ts
â”‚   â”œâ”€â”€ dataAccess/          # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ dataAccess.ts
â”‚   â”‚   â”œâ”€â”€ databaseAccess.ts
â”‚   â”‚   â””â”€â”€ sqliteAccess.ts
â”‚   â””â”€â”€ utils/               # å·¥å…·ç±»
â”‚       â”œâ”€â”€ logger.ts
â”‚       â””â”€â”€ config.ts
â”œâ”€â”€ out/                     # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ .vscode/
    â”œâ”€â”€ launch.json          # è°ƒè¯•é…ç½®
    â””â”€â”€ tasks.json           # æ„å»ºä»»åŠ¡
```

## å¼€å‘

### ç¼–è¯‘

```bash
npm run compile
```

### ç›‘å¬æ¨¡å¼ï¼ˆè‡ªåŠ¨ç¼–è¯‘ï¼‰

```bash
npm run watch
```

### è°ƒè¯•

1. åœ¨ VS Code/Cursor ä¸­æ‰“å¼€é¡¹ç›®
2. æŒ‰ `F5` å¯åŠ¨è°ƒè¯•
3. åœ¨æ–°æ‰“å¼€çš„ Extension Development Host çª—å£ä¸­æµ‹è¯•

## æ•…éšœæ’é™¤

### æ’ä»¶æ²¡æœ‰æ¿€æ´»

- æ£€æŸ¥è¾“å‡ºé¢æ¿ä¸­çš„é”™è¯¯ä¿¡æ¯
- ç¡®ä¿å·¥ä½œåŒºå·²æ‰“å¼€ï¼ˆæ’ä»¶éœ€è¦å·¥ä½œåŒºè·¯å¾„ï¼‰
- æ£€æŸ¥ `package.json` ä¸­çš„ `activationEvents` é…ç½®

### æ•°æ®æ–‡ä»¶æ²¡æœ‰ç”Ÿæˆ

- æ£€æŸ¥å·¥ä½œåŒºæ˜¯å¦æœ‰å†™å…¥æƒé™
- æŸ¥çœ‹è¾“å‡ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
- ç¡®è®¤æ•°æ®é‡‡é›†å·²å¯ç”¨ï¼ˆé»˜è®¤å¯ç”¨ï¼‰

### ç¼–è¯‘é”™è¯¯

- è¿è¡Œ `npm install` ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²å®‰è£…
- æ£€æŸ¥ TypeScript ç‰ˆæœ¬ï¼š`npm list typescript`
- ç¡®ä¿ `@types/node` å’Œ `@types/vscode` å·²å®‰è£…

## è®¸å¯è¯

ISC

